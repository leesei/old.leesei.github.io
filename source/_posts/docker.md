---
title: "Docker"
date: 2014-12-11 17:37:50
categories:
  - container
tags:
  - shell-tool
  - docker
  - devops
  - web-deploy
---

Docker packs your apps and services in a portable container.

[Docker Way](https://storify.com/eshamow/solomon-hykes-docker-way)
The Docker Engines provides the [Docker Remote API](https://docs.docker.com/engine/api/) and interface with container execution backend, Docker's own tools and tools from 3rd can interacts with this API to provide higher level features on Docker containers.  
[dotScale 2013 - Solomon Hykes - Why we built Docker - YouTube](https://www.youtube.com/watch?v=3N3n9FzebAA)

On the contrary, [boycott docker](http://www.boycottdocker.org/).
[Martin Heinz - It's Time to Forget About Docker](https://martinheinz.dev/blog/35)

[Docker - Build, Ship, and Run Any App, Anywhere](http://www.docker.com/)
[Docker overview | Docker Documentation](https://docs.docker.com/engine/docker-overview/)
[Docker Docs](https://docs.docker.com/) [Docker Glossary](https://docs.docker.com/engine/reference/glossary/)
[The Docker user guide](http://docs.docker.com/engine/userguide/)

[veggiemonk/awesome-docker: A curated list of Docker resources and projects](https://github.com/veggiemonk/awesome-docker)

[Docker Engine | Docker](http://www.docker.com/products/docker-engine)
[Engineering | Docker Blog](https://blog.docker.com/category/engineering/)
[Resources | Docker](http://www.docker.com/products/resources)
[Docker Training - Docker Training](http://training.docker.com/)

[Introducing Two New Community Repositories: Docker Labs and Docker Community | Docker Blog](https://blog.docker.com/2016/05/docker-labs-docker-community/)
[docker/labs: This is a collection of tutorials for learning how to use Docker with various tools. Contributions welcome.](https://github.com/docker/labs) !important
[docker/community](https://github.com/docker/community)
[labs/dockercon-us-2017 at master ¬∑ docker/labs](https://github.com/docker/labs/tree/master/dockercon-us-2017)

[Introduction to Docker - YouTube](https://www.youtube.com/watch?v=Q5POuMHxW-0)
[Docker at Spotify - YouTube](https://www.youtube.com/watch?v=pts6F00GFuU)
[Docker 101 session - YouTube](https://www.youtube.com/watch?v=iYwPyjPhXXE)
[Docker 101: Dockerizing Your Infrastructure - YouTube](https://www.youtube.com/watch?v=4W2YY-qBla0)
[Docker fundamentals: basics, storage, networking - Introduction to Docker - YouTube](https://www.youtube.com/watch?v=UV3cw4QLJLs)
[Docker Tutorial for Beginners [FULL COURSE in 3 Hours] - YouTube](https://www.youtube.com/watch?v=3c-iBn73dDE)
[Docker - YouTube](https://www.youtube.com/playlist?list=PLot-YkcC7wZ91Qf-ErxdR03fxu076VUhe) Level Up

Gist of Docker:

- [Install](https://docs.docker.com/installation/) [Docker Engine](https://docs.docker.com/engine/)
- (optional) Use [Dockerfile](https://docs.docker.com/engine/reference/builder/) to create a [Docker Image](https://docs.docker.com/engine/tutorials/dockerimages/)
- Run the Images (built locally or pulled from Docker Registry/Docker Hub) in a Docker Container, see [Get Started, Part 2: Containers | Docker Documentation](https://docs.docker.com/get-started/part2/#run-the-app)
- Profit

[docker error creating new backup file '/var/lib/dpkg/status-old': Invalid cross-device link](https://gist.github.com/Francesco149/ce376cd83d42774ed39d34816b9e21db)
Docker overlay2 metacopy issue on Linux 4.19

<!-- more -->

[Get Started | Docker Documentation](https://docs.docker.com/get-started/) all the way to Swarm, Stack and Deployment
[Docker overview | Docker Documentation](https://docs.docker.com/engine/docker-overview/)
[Engineering Archives - Docker Blog](https://blog.docker.com/category/engineering/)
[A beginner‚Äôs guide to Docker‚Ää‚Äî‚Äähow to create your first Docker application](https://medium.freecodecamp.org/a-beginners-guide-to-docker-how-to-create-your-first-docker-application-cc03de9b639f)
[Docker Jumpstart](http://odewahn.github.io/docker-jumpstart/)
[Docker Architecture](https://www.aquasec.com/wiki/plugins/servlet/mobile)
[wsargent/docker-cheat-sheet: Docker Cheat Sheet](https://github.com/wsargent/docker-cheat-sheet)
[Docker 101 - how to get from creation to deployment](https://www.freecodecamp.org/news/docker-101-creation-to-deployment/amp/)
[The Complete Docker Collection [Tutorials] - DZone Cloud](https://dzone.com/articles/the-complete-docker-collection-tutorials)
[Docker Explained ‚Äì An Introductory Guide To Docker - DZone Cloud](https://dzone.com/articles/docker-explained-an-introductory-guide-to-docker)
[Demystifying Containers 101: A Deep Dive Into Container Technology for Beginners](https://medium.freecodecamp.org/demystifying-containers-101-a-deep-dive-into-container-technology-for-beginners-d7b60d8511c1)
[5 part Docker series, beginner to master - DEV Community üë©‚Äçüíªüë®‚Äçüíª](https://dev.to/softchris/5-part-docker-series-beginner-to-master-3m1b) !important
[Docker Tutorial for Beginners - Hashnode](https://hashnode.com/post/docker-tutorial-for-beginners-cjrj2hg5001s2ufs1nker9he2)
[Tutorials ‚Äì Docker ¬ª Linux Magazine](http://www.linux-magazine.com/Issues/2018/215/Tutorials-Docker)
[Getting Started with Docker | Scotch](https://scotch.io/tutorials/getting-started-with-docker)
[Howto: Docker, Databases, and Dashboards to Deal with Your Data | Hackaday](https://hackaday.com/2019/01/23/howto-docker-databases-and-dashboards-to-deal-with-your-data/)
[Docker In A Nutshell ‚Äì Coinmonks ‚Äì Medium](https://medium.com/coinmonks/docker-in-a-nutshell-6b3985a58d68) macOS setup
[Learn Enough Docker to be Useful ‚Äì Towards Data Science](https://towardsdatascience.com/learn-enough-docker-to-be-useful-b7ba70caeb4b) Part 1
[Learn Enough Docker to be Useful ‚Äì Towards Data Science](https://towardsdatascience.com/learn-enough-docker-to-be-useful-1c40ea269fa8) Part 2
[Learn Enough Docker to be Useful ‚Äì Towards Data Science](https://towardsdatascience.com/learn-enough-docker-to-be-useful-b0b44222eef5) Part 3
[Slimming Down Your Docker Images ‚Äì Towards Data Science](https://towardsdatascience.com/slimming-down-your-docker-images-275f0ca9337e) Part 4

[A Docker Tutorial for Beginners](https://docker-curriculum.com/)
[Learn Docker by Building a Microservice](http://www.dwmkerr.com/learn-docker-by-building-a-microservice/)
[Docker Tutorial: Containers, VMs, and Docker for Beginners - Level UpLevel Up](https://www.level-up.one/docker-tutorial-containers-vms/)
[A Beginner-Friendly Introduction to Containers, VMs and Docker](https://medium.freecodecamp.org/a-beginner-friendly-introduction-to-containers-vms-and-docker-79a9e3e119b)
[Learn Enough Docker to be Useful ‚Äì Towards Data Science](https://towardsdatascience.com/learn-enough-docker-to-be-useful-b7ba70caeb4b)
[alexellis/HandsOnDocker: Get hands-on with Docker through a dozen self-paced and progressive labs.](https://github.com/alexellis/handsondocker/)
[Docker Basics - Amazon EC2 Container Service](http://docs.aws.amazon.com/AmazonECS/latest/developerguide/docker-basics.html)
[Creating a Cross-platform Docker Development Environment | via @codeship](https://blog.codeship.com/cross-platform-docker-development-environment/)

[In Docker, what's the difference between a container and an image? - Stack Overflow](http://stackoverflow.com/questions/21498832/in-docker-whats-the-difference-between-a-container-and-an-image)
[Docker image vs container - Stack Overflow](http://stackoverflow.com/questions/23735149/docker-image-vs-container)
[How to Automate Docker Deployments](http://paislee.io/how-to-automate-docker-deployments/) image, container and image maintenance

[Docker ‚Äî‚Äî ‰ªéÂÖ•Èó®Âà∞ÂÆûË∑µ](http://yeasy.gitbooks.io/docker_practice/content/)
[Docker ‰∏≠ÊñáÊïôÁ®ã](http://letong.gitbooks.io/docker/content/)
[ÂÖ®Èù¢ÊòìÊáÇÁöÑ Docker Êåá‰ª§Â§ßÂÖ®](http://joshhu.gitdbooks.io/dockercommands/content/)
[Docker ÈóÆÁ≠îÂΩïÔºà100 ÈóÆÔºâ ¬∑ Â§ßÊ°•‰∏ãÁöÑËúóÁâõ](https://blog.lab99.org/post/docker-2016-07-14-faq.html)

[Should I use Vagrant or Docker.io for creating an isolated environment? - Stack Overflow](http://stackoverflow.com/questions/16647069/should-i-use-vagrant-or-docker-io-for-creating-an-isolated-environment)
[Docker Do's And Don'ts | devo.ps](http://devo.ps/blog/docker-dos-and-donts/)
[Vagrant, Docker and Ansible. WTF? | devo.ps](http://devo.ps/blog/vagrant-docker-and-ansible-wtf/)

[Docker Tutorial Series | iRomin](http://rominirani.com/2015/07/19/docker-tutorial-series/)
[docker - Head in the clouds...](http://jmkhael.hopto.org/tag/docker/)
[jmkhael/docker-playground: Docker playground used in the Docker blog serie](https://github.com/jmkhael/docker-playground)

[10 Free Courses to Learn Docker for Programmers and DevOps Engineers](https://hackernoon.com/10-free-courses-to-learn-docker-for-programmers-and-devops-engineers-7ff2781fd6e0)

[CenturyLink Labs - How to Use Docker, CoreOS, Linux Containers, Cloud](https://labs.ctl.io/)
[Home - CenturyLink Cloud Developer Center](https://www.ctl.io/developers/)
[Blog :: Glider Labs](http://gliderlabs.com/blog/)
[Bitnami Stacksmith](https://stacksmith.bitnami.com/?vero_conv=1304303901)
[Jessie Frazelle's Blog: Home](https://blog.jessfraz.com/)

[Container42 ¬∑ Stuff I find interesting](http://container42.com/)

[50+ Useful Docker Tools | Caylent](https://caylent.com/50-useful-docker-tools/)

[52-technologies-in-2016/39-docker](https://github.com/shekhargulati/52-technologies-in-2016/blob/master/39-docker/README.md)
[52-technologies-in-2016/40-docker-cron](https://github.com/shekhargulati/52-technologies-in-2016/blob/master/40-docker-cron/README.md)
[52-technologies-in-2016/42-docker-compose](https://github.com/shekhargulati/52-technologies-in-2016/blob/master/42-docker-compose/README.md)

## Play-with-docker

[Play with Docker](https://labs.play-with-docker.com/)
[play-with-docker/play-with-docker: You know it, you use it, now it's time to improve it. PWD!.](https://github.com/play-with-docker/play-with-docker)
[play-with-docker/training](https://github.com/play-with-docker/training)
[play-with-docker/play-with-docker.github.io: Play with docker class-room repo](https://github.com/play-with-docker/play-with-docker.github.io)

[jpetazzo/orchestration-workshop](https://github.com/jpetazzo/orchestration-workshop) !important

## Videos

[Docker - Playlists - YouTube](https://www.youtube.com/user/dockerrun/playlists)

[DockerCon EU 2017: All the videos are now live! - Docker Blog](https://blog.docker.com/2017/10/dockercon-eu-2017-videos-now-live/)
[DockerCon Europe 2017 Videos](https://dockercon.docker.com/)
[DockerCon Europe 2017 - YouTube](https://www.youtube.com/playlist?list=PLkA60AVN3hh_dZhew2ypUarxhsh9T7ZEd)
[DockerCon EU 2017 Moby Summit - YouTube](https://www.youtube.com/playlist?list=PLkA60AVN3hh8EwsMMvW1plvHbbNOoLJuG)
[DockerCon SF 2018](https://dockercon2018.hubs.vidyard.com/)

[Docker Learning Series - YouTube](https://www.youtube.com/playlist?list=PLfXWzKEc7gHzFoaBOExlpakMOyPE57_7t)
[Docker for the Absolute Beginners - YouTube](https://www.youtube.com/playlist?list=PL2We04F3Y_40PSZyTcOUuH4flMxbxkhDe)
[Docker Tutorial for Beginners - A Full DevOps Course on How to Run Applications in Containers - YouTube](https://www.youtube.com/watch?v=fqMOX6JJhGo)

Production
[The Containerizers - YouTube](https://www.youtube.com/channel/UCFkOoM5xXS6hRs1lpw_8ydQ)
[Docker features and tools by Tom Verelst - YouTube](https://www.youtube.com/watch?v=heBI7oQvHZU)
[Introduction to Docker - YouTube](https://www.youtube.com/watch?v=Q5POuMHxW-0) by dotCloud founder in 2013
[Taking Docker to Production: What You Need to Know and Decide - DockerCon Europe 2017 Videos](https://dockercon.docker.com/watch/WdAeLaLuSCNQwEp61YVXUt)

## History

[A Not Very Short Introduction to Docker - Jayway](http://www.jayway.com/2015/03/21/a-not-very-short-introduction-to-docker/)
[How Docker Was Born | StackShare](http://stackshare.io/posts/how-docker-was-born)
[How Docker Fits Into The Current DevOps Landscape | StackShare](http://stackshare.io/posts/how-docker-fits-into-the-current-devops-landscape)
[How Docker Manages Its Massive Open Source Project | StackShare](http://stackshare.io/posts/how-docker-manages-its-massive-open-source-project)

Docker started out using LXC, then [docker/libcontainer](https://github.com/docker/libcontainer), then [opencontainers/runc](https://github.com/opencontainers/runc)
[Docker drops LXC as default execution environment](http://www.infoq.com/news/2014/03/docker_0_9)
[Docker and Broad Industry Coalition Unite to Create Open Container Project | Docker Blog](http://blog.docker.com/2015/06/open-container-project-foundation/)
[Containerd: a daemon to control runC | Docker Blog](http://blog.docker.com/2015/12/containerd-daemon-to-control-runc/)

## Internals

[Docker components explained](http://alexander.holbreich.org/docker-components-explained/)
[Docker, Containerd & Standalone Runtimes ‚Äî Here‚Äôs What You Should Know | by Aymen Eon Amri | FAUN](https://faun.pub/docker-containerd-standalone-runtimes-heres-what-you-should-know-b834ef155426)

## #perfmatters

[Measuring Docker IO overhead - MySQL Performance Blog](https://www.percona.com/blog/2016/02/11/measuring-docker-io-overhead/)
[Measuring Percona Server Docker CPU/network overhead - MySQL Performance Blog](https://www.percona.com/blog/2016/02/05/measuring-docker-cpu-network-overhead/)
[HPE and Docker Reference Configuration for infrastructure optimization using Docker containers on... ‚Ä¢ Droplr‚Ñ¢](http://d.pr/f/Zjv65z/1BuMbZ8p)

## Why Docker

[Why Docker | Docker](https://www.docker.com/why-docker)
[Why Docker?](https://docs.docker.com/engine/#why-docker)

[Docker 1.0 brings container technology to the enterprise | ZDNet](http://www.zdnet.com/article/docker-1-0-brings-container-technology-to-the-enterprise/)

[CI, CD with Docker, Jenkins and Tutum | Sreenivas Makam's Blog](https://sreeninet.wordpress.com/2016/01/23/ci-cd-with-docker-jenkins-and-tutum/) mostly "why Docker"

[Who's using Docker? | Opensource.com](https://opensource.com/business/14/7/docker-through-hype)

[Containers as a Service (CaaS) as your new platform for application development and operations | Docker Blog](https://blog.docker.com/2016/02/containers-as-a-service-caas/)

[Immutable Awesomeness - Josh Corman and John Willis at DevOps Enterprise Summit 2015 - YouTube](https://www.youtube.com/watch?v=-S8-lrm3iV4)

## Ambassador pattern

[Link via an ambassador container](https://docs.docker.com/engine/admin/ambassador_pattern_linking/)
[Docker Grand Ambassador ¬∑ Container42](http://www.container42.com/2014/08/28/docker-grand-ambassador/)

[Deploying Multi-Server Docker Apps with Ambassadors - CenturyLink Cloud Developer Center](https://www.ctl.io/developers/blog/post/deploying-multi-server-docker-apps-with-ambassadors/)
[CenturyLinkLabs/ctlc-docker-ambassador](https://github.com/CenturyLinkLabs/ctlc-docker-ambassador)
[dockerfiles/ambassador at master ¬∑ SvenDowideit/dockerfiles](https://github.com/SvenDowideit/dockerfiles/tree/master/ambassador)

[gliderlabs/connectable: Magic proxy for internal services](https://github.com/gliderlabs/connectable)

Ambassador pattern: if App container depends on Database container, always create the Database container on the same Docker host and link it to the App container. Whether the Database container is the real database or a proxy of a remote service is an implementation detail of the operation team.
[Link via an ambassador container](https://docs.docker.com/engine/admin/ambassador_pattern_linking/)

[Automated docker ambassadors with CoreOS + registrator + ambassadord ¬´ Random thoughts along the roadside‚Ä¶](http://www.virtualroadside.com/blog/index.php/2014/07/28/automated-docker-ambassadors-with-coreos-registrator-ambassadord/)

## Manageacloud

[Dockerising Puppet | Official Manageacloud blog](http://blog.manageacloud.com/entry/dockerising-puppet)
[Deploying Containers using Docker Compose | Official Manageacloud blog](http://blog.manageacloud.com/entry/deploying-containers-using-docker-compose)

## Phusion

[Baseimage-docker, fat containers and "treating containers as VMs"](https://blog.phusion.nl/2015/01/20/baseimage-docker-fat-containers-treating-containers-vms/)
[Baseimage-docker: A minimal Ubuntu base image modified for Docker-friendliness](http://phusion.github.io/baseimage-docker/)

## Linuxserver.io

[Linuxserver.io - There's no place like 127.0.0.1](https://www.linuxserver.io/)
[Building software from source using Docker ‚Äì Linuxserver.io](https://www.linuxserver.io/index.php/2016/02/06/building-software-from-source-using-docker/)

## Nordic APIs

[Docker Containers and APIs: A Brief Overview | Nordic APIs |](http://nordicapis.com/docker-containers-and-apis-a-brief-overview/)
[API-Driven DevOps: Spotlight on Docker | Nordic APIs |](http://nordicapis.com/api-driven-devops-spotlight-on-docker/)

## InfoQ

[Ê∑±ÂÖ•ÊµÖÂá∫ Docker - InfoQ](http://www.infoq.com/cn/dockerdeep/)
[Docker - InfoQ cn](http://www.infoq.com/cn/dockers)
[Docker - InfoQ](http://www.infoq.com/docker-2)

[Docker ‰∏âÂπ¥ÂõûÈ°æÔºöÊ¢¶ÊÉ≥‰æùÂú®Ôºå‰∫∫ÁîüÊ≠£ÂΩìÂπ¥](http://www.infoq.com/cn/articles/docker-turns-3)
[Easier, Better, Faster, Safer Deployment with Docker and Immutable Containers](http://www.infoq.com/presentations/immutable-servers-docker)

## DigitalOcean

[Docker Tutorials | DigitalOcean](https://www.digitalocean.com/community/tags/docker?type=tutorials)
[Docker Explained: Using Dockerfiles to Automate Building of Images | DigitalOcean](https://www.digitalocean.com/community/tutorials/docker-explained-using-dockerfiles-to-automate-building-of-images)
[The Docker Ecosystem | DigitalOcean](https://www.digitalocean.com/community/tutorial_series/the-docker-ecosystem)
[Docker Explained: How To Containerize and Use Nginx as a Proxy | DigitalOcean](https://www.digitalocean.com/community/tutorials/docker-explained-how-to-containerize-and-use-nginx-as-a-proxy)

## Network

> With Swarm mode's multi-node overlay network and service discovery built-in, I consider linking container on single host over `bridge` network obsolete.
> Use Docker's overlay by default, for complex use cases see `kubernetes#cni`

[Connection refused? Docker networking and how it impacts your image](https://pythonspeed.com/articles/docker-connection-refused/) fundamental, network interfaces, listen on 0.0.0.0

[Networking Overview | Docker Documentation](https://docs.docker.com/network/)
[Docker - Docker Reference Architecture: Designing Scalable, Portable Docker Container Networks](https://success.docker.com/article/networking) about Docker Swarm
Ports bound by container are managed by the process `docker-proxy` for port forwarding.
Use `netstat -nlt` to list all listening TCP ports in _numeric_ format.

[Docker Networking Design Philosophy | Docker Blog](https://blog.docker.com/2016/03/docker-networking-design-philosophy/)
[Container Networking: A Breakdown, Explanation and Analysis - The New Stack](http://thenewstack.io/container-networking-breakdown-explanation-analysis/)
[Docker Networking - Common Issues and Troubleshooting Techniques](https://www.slideshare.net/SreenivasMakam/docker-networking-common-issues-and-troubleshooting-techniques)

[Service Discovery and Load balancing Internals in Docker 1.12 ‚Äì Sreenivas Makam's Blog](https://sreeninet.wordpress.com/2016/07/29/service-discovery-and-load-balancing-internals-in-docker-1-12/amp/) DNS strategy explained with Docker Swarm
[Docker for Ops: Docker Ne`tworking Deep Di`ve, Considerations and Troubleshooting - Docker Track - YouTube](https://www.youtube.com/watch?v=Gwdo3fo6pZg)

Docker acquired SocketPlane to improve libnetwork, released with Docker 1.9 late 2015.
[libnetwork/design.md at master ¬∑ docker/libnetwork](https://github.com/docker/libnetwork/blob/master/docs/design.md)
[docker/vlan-networks.md at master ¬∑ docker/docker](https://github.com/docker/docker/blob/master/experimental/vlan-networks.md)
[Issues ¬∑ docker/libnetwork](https://github.com/docker/libnetwork/issues)

libnetwork issues:
[MacVLAN. A network locks the gateway ip preventing to assign it ¬∑ Issue #1447 ¬∑ docker/libnetwork](https://github.com/docker/libnetwork/issues/1447)
UDP failure, fixed in 17.05
[Failed to receive UDP traffic after container restart ¬∑ Issue #8795 ¬∑ moby/moby](https://github.com/moby/moby/issues/8795)
[Conntrack flush support by fcrisciani ¬∑ Pull Request #32505 ¬∑ moby/moby](https://github.com/moby/moby/pull/32505)

[Four ways to connect a docker container to a local network - Odd Bits](http://blog.oddbit.com/2014/08/11/four-ways-to-connect-a-docker/)
[Odd Bits - Using Docker macvlan networks](http://blog.oddbit.com/2018/03/12/using-docker-macvlan-networks/)

[Kubernetes: Why Kubernetes doesn‚Äôt use libnetwork](http://blog.kubernetes.io/2016/01/why-Kubernetes-doesnt-use-libnetwork.html)
Docker used libnetwork and [Container Network Model (CNM)](https://blog.docker.com/2015/04/docker-networking-takes-a-step-in-the-right-direction-2/), which are tightly coupled with Docker Engine. appC used Container Network Interface (CNI), which plays along with other ecosystem.

[Understanding Docker ‚Äì Network Namespaces ‚Äì zwischenzugs](https://zwischenzugs.com/2015/11/21/understanding-docker-network-namespaces/)
[Introduction to Linux Network Namespaces - YouTube](https://www.youtube.com/watch?v=_WgUwUf1d34)
[ËÆ∞‰∏ÄÊ¨° Kubernetes/Docker ÁΩëÁªúÊéíÈöú | ÈÖ∑ Â£≥ - CoolShell](https://coolshell.cn/articles/18654.html)

[Docker tutorial: Get started with Docker networking | InfoWorld](https://www.infoworld.com/article/3276604/containers/docker-tutorial-get-started-with-docker-networking.html)

### Tungsten

[Home - Tungsten Fabric](https://tungsten.io/) = Contrail
[What is the Juniper Contrail Controller? ‚Äî SDxCentral.com](https://www.sdxcentral.com/networking/sdn/definitions/juniper-contrail-controller/)

### Contiv

[Contiv](https://contiv.io/)
[Container Networking with Project Contiv - YouTube](https://www.youtube.com/watch?v=55s4wAVbTM4)
[Contiv on Docker swarm mode using VLAN (L2) networking - YouTube](https://www.youtube.com/watch?v=GlNuapz0Oxg)

### Cilium

[Cilium - Linux Native, API-Aware Networking and Security for Containers](https://cilium.io/) eBPF based
[cilium/cilium: eBPF-based Networking, Security, and Observability](https://github.com/cilium/cilium)
[Introduction to Cilium ‚Äî Cilium documentation](http://docs.cilium.io/en/stable/intro/)

[Linux kernel holds key for advanced container networking | InfoWorld](http://www.infoworld.com/article/3185419/networking/cilium-leverages-linux-kernel-for-advanced-container-networking.html)

### Flannel

[coreos/flannel: flannel is a network fabric for containers, designed for Kubernetes](https://github.com/coreos/flannel)

### Calico

[Project Calico - Secure Networking for the Cloud Native Era](https://www.projectcalico.org/)

[projectcalico/canal: Policy based networking for cloud native applications](https://github.com/projectcalico/canal) Calico + flannel, deprecated
[Installing Calico for policy and flannel for networking](https://docs.projectcalico.org/v3.8/getting-started/kubernetes/installation/flannel)
[Calico for Kubernetes networking: the basics & examples](https://medium.com/flant-com/calico-for-kubernetes-networking-792b41e19d69)

### Weave

[Docker container networking monitoring - Weaveworks](https://www.weave.works/)
[Weaveworks](https://github.com/weaveworks) GitHub org
[weaveworks/weave: Simple, resilient multi-host Docker networking](https://github.com/weaveworks/weave)

[Weave Discovery and Docker Swarm - Weaveworks](https://www.weave.works/weave-discovery-and-docker-swarm/)
[Using Nginx as a reverse proxy/load balancer with Weave and Docker - Weaveworks](https://www.weave.works/guides/using-nginx-as-a-reverse-proxyload-balancer-with-weave-and-docker/)

### Submariner

[Cross-Cluster Network Connectivity for Kubernetes | Submariner](https://submariner.io/) CSI compatible

[Announcing Submariner, Multi-Cluster Network Connectivity for Kubernetes](https://rancher.com/blog/2019/announcing-submariner-multi-cluster-kubernetes-networking/)
[Rancher Labs Launches Submariner Networking Project for Kubernetes - Container Journal](https://containerjournal.com/2019/03/12/rancher-labs-launches-submariner-networking-project-for-kubernetes/amp/)

[Introducing Submariner: Multi-Cluster Network Connectivity](https://info.rancher.com/meetup-introducing-submariner-multicluster-networking)

### Nebula

[Introducing Nebula, the open source global overlay network from Slack](https://slack.engineering/introducing-nebula-the-open-source-global-overlay-network-from-slack-884110a5579)
[slackhq/nebula: A scalable overlay networking tool with a focus on performance, simplicity and security](https://github.com/slackhq/nebula)

## Volumes

[Use volumes | Docker Documentation](https://docs.docker.com/storage/volumes/)
[Comprehensive Overview of Storage Scalability in Docker ‚Äì Red Hat Developer Blog](http://developerblog.redhat.com/2014/09/30/overview-storage-scalability-docker/)
[Where are Docker images stored? - Lounge Scene](http://blog.thoward37.me/articles/where-are-docker-images-stored/)
[Understanding Volumes in Docker - Container Solutions](http://container-solutions.com/understanding-volumes-docker/)
[Walkthrough: Docker Volumes vs Docker Volumes with Flocker ¬∑ ClusterHQ](https://clusterhq.com/2015/12/09/difference-docker-volumes-flocker-volumes/)
[How To Share Data between Docker Containers | DigitalOcean](https://www.digitalocean.com/community/tutorials/how-to-share-data-between-docker-containers)
[How To Share Data between the Docker Container and the Host | DigitalOcean](https://www.digitalocean.com/community/tutorials/how-to-share-data-between-the-docker-container-and-the-host)
[Working with Docker Volumes](https://hostpresto.com/community/tutorials/working-with-docker-volumes/)
[Containerizing stateful applications | InfoWorld](http://www.infoworld.com/article/3106416/cloud-computing/containerizing-stateful-applications.html)
[Docker tutorial: Get started with Docker volumes | InfoWorld](https://www.infoworld.com/article/3269521/containers/docker-tutorial-get-started-with-docker-volumes.html)
[Docker Containers and Persistent Data ‚Äì Ravindu N Fernando ‚Äì Medium](https://medium.com/@RavinduNOnline/docker-containers-and-persistent-data-9cbe5eaf68fe)

[Docker In-depth: Volumes ¬∑ Container42](http://www.container42.com/2014/11/03/docker-indepth-volumes/)
[Persistent volumes with Docker - Data-only container pattern ¬∑ Container42](http://container42.com/2013/12/16/persistent-volumes-with-docker-container-as-volume-pattern/)
[Data-only container madness ¬∑ Container42](http://www.container42.com/2014/11/18/data-only-container-madness/)
[dockerfile - Docker: Mount directory from one container to another - Stack Overflow](https://stackoverflow.com/a/33232991/665507) data only container and `--volumes from`

[Named volumes](https://docs.docker.com/engine/reference/commandline/volume_create/) [replaces](https://github.com/docker/docker/issues/17798) data-only containers since 1.9.
[What is the (best) way to manage permissions for docker shared volumes - Stack Overflow](http://stackoverflow.com/questions/23544282/what-is-the-best-way-to-manage-permissions-for-docker-shared-volumes)

[Docker Webinar Q&A: Persistent Storage & Docker - Docker Blog](https://blog.docker.com/2015/12/persistent-storage-docker/)
[Part 1: Docker Basics: Understanding Union Filesystems, Storage and Volumes - docker](https://docker.wistia.com/medias/2pz7q0awzh)
[Part 2: Docker Storage Considerations - docker](https://docker.wistia.com/medias/zix9n9eesq)
[Part 3: Persistent Storage, Data and Docker - docker](https://docker.wistia.com/medias/6m689744b4)
[Use Docker Engine Volume plugins | Docker Documentation](https://docs.docker.com/engine/extend/legacy_plugins/#volume-plugins)

[Martin Heinz - Deep Dive into Docker Internals‚Ää-‚ÄäUnion Filesystem](https://martinheinz.dev/blog/44)

[templated volume name syntax not supported in compose v3 format? ¬∑ Issue #30770 ¬∑ moby/moby](https://github.com/moby/moby/issues/30770#issuecomment-310283484) using templated volume name in swarm mode

```sh
# create data volume
docker create -v /var/lib/mysql --name data-mysql busybox /bin/true

# copy data files to /backup
docker run --volumes-from data-mysql mysql

# copy data files to /backup
docker run --rm --volumes-from data-mysql -v HOST_BACKUP:/backup -it busybox sh
```

[gdiepen/docker-convenience-scripts](https://github.com/gdiepen/docker-convenience-scripts) `docker_clone_volume.sh`
[Nfs4 Docker Stacks - flavio.aiello.ch](http://flavio.aiello.ch/nfs4-docker-stacks/)

### SELinuz

On SELinux (Fedora/Centos), add `:Z` to mount option
[Permission denied on accessing host directory in Docker - Stack Overflow](https://stackoverflow.com/questions/24288616/permission-denied-on-accessing-host-directory-in-docker)
[`Permission denied` when trying to access volume while selinux-enabled=true ¬∑ Issue #33389 ¬∑ moby/moby](https://github.com/moby/moby/issues/33389)
[D4M 17.04.0-ce-rc2-mac6 (16165): Volume labels no longer accepted in stack file ¬∑ Issue #32579 ¬∑ moby/moby](https://github.com/moby/moby/issues/32579) however this fix is not available for service

[SELinux blocks bind mount with Docker Compose ¬∑ Issue #10779 ¬∑ containers/podman](https://github.com/containers/podman/issues/10779) `:Z,U` or `chcon -Rt container_file_t PATHTOHOSTDIR`/`chcon -Rt svirt_sandbox_file_t PATHTOHOSTDIR` on host

[Set the selinux status to `Permissive`, still can not run docker - Stack Overflow](https://stackoverflow.com/a/51098488/665507) change option in `/etc/sysconfig/docker` to `--selinux-enabled=false`

### Storage

Docker started out using AUFS (a union file system) for storage, but AUFS didn't make it into mainstream Linux kernel. Many distro now uses device mapper or the new OverlayFS.
[Docker storage drivers | Docker Documentation](https://docs.docker.com/engine/userguide/storagedriver/)
[About images, containers, and storage drivers | Docker Documentation](https://docs.docker.com/engine/userguide/storagedriver/imagesandcontainers/)
[Docker Basics Webinar Q&A: Understanding Union Filesystems, Storage and Volumes | Docker Blog](https://blog.docker.com/2015/10/docker-basics-webinar-qa/)
[Docker storage 101: How storage works in Docker](http://www.computerweekly.com/feature/Docker-storage-101-How-storage-works-in-Docker)
[Docker Storage: An Introduction - via @mazembo | via @codeship](https://blog.codeship.com/docker-storage-introduction/)
[Jessie Frazelle's Blog: The Brutally Honest Guide to Docker Graphdrivers](https://blog.jessfraz.com/post/the-brutally-honest-guide-to-docker-graphdrivers/)
[Docker Storage Drivers](https://jpetazzo.github.io/assets/2015-03-03-not-so-deep-dive-into-docker-storage-drivers.html)

[Docker for Ops: Docker Storage and Volumes Deep Dive and Considerations - Docker Track - YouTube](https://www.youtube.com/watch?v=X_q2l8hotAc)

### 3rd Party Storage Drivers

[Docker Persistent Volumes ¬ª ADMIN Magazine](http://www.admin-magazine.com/Articles/Persistent-volumes-for-Docker-containers)

[REX-Ray](https://rexray.io/) [docs](http://rexray.readthedocs.io/en/stable/)
[rexray/rexray: REX-Ray is a container storage orchestration engine enabling persistence for cloud native workloads](https://github.com/rexray/rexray)

[rancher/convoy: A Docker volume plugin, managing persistent container volumes.](https://github.com/rancher/convoy) [deprecated](https://forums.rancher.com/t/is-convoy-project-deprecated/8403)

[ContainX/docker-volume-netshare: Docker NFS, AWS EFS, Ceph & Samba/CIFS Volume Plugin](https://github.com/ContainX/docker-volume-netshare)

[ClusterHQ/flocker: Container data volume manager for your Dockerized application](https://github.com/ClusterHQ/flocker)

> ClusterHQ shut down in 2016-12

## Docker Engine API

Communicate to Docker Engine with HTTP API via `unix:///var/run/docker.sock`

[Develop with Docker Engine SDKs and API | Docker Documentation](https://docs.docker.com/develop/sdk/)
[Examples using the Docker Engine SDKs and Docker API | Docker Documentation](https://docs.docker.com/develop/sdk/examples/)
[Engine API version history | Docker Documentation](https://docs.docker.com/engine/api/version-history/)
[Docker Engine API Reference](https://docs.docker.com/engine/api/latest/)

[moby/client - GoDoc](https://godoc.org/github.com/moby/moby/client)
[Docker SDK for Python ‚Äî Docker SDK for Python documentation](https://docker-py.readthedocs.io/en/stable/)

[apocas/dockerode: Docker Remote API Node.js Client module](https://github.com/apocas/dockerode)
[fsouza/go-dockerclient: Go client for the Docker remote API.](https://github.com/fsouza/go-dockerclient)

## Docker Registry

The Docker Hub is the official hosted registry service by Docker for building and shipping application or service containers. [Automated Builds](https://docs.docker.com/docker-hub/builds/) can build image upon repo change. The problem is it requires R/W access to all user repo and it does not have good [track](https://success.docker.com/article/docker-hub-user-notification) [record](https://www.reddit.com/r/linux/comments/bi0em8/docker_hub_hacked_190k_accounts_github_tokens).

[Docker Hub](https://hub.docker.com/explore/)
[Introducing Docker Hub](https://docs.docker.com/docker-hub/overview/)
[Integrating Docker Hub In Your Application Build Process | Linux.com | The source for Linux information](https://www.linux.com/learn/integrating-docker-hub-your-application-build-process)
[Introducing the Docker Index: Insight from the World‚Äôs Most Popular Container Registry - Docker Blog](https://www.docker.com/blog/introducing-the-docker-index/)

[An Overview of Docker Registries - via @codeship | via @codeship](https://blog.codeship.com/overview-of-docker-registries/)
[Rancher Labs | Comparing Four Hosted Docker Registries | Rancher Labs](http://rancher.com/comparing-four-hosted-docker-registries/)
[Docker Registries: the Good, the Bad & the Ugly](https://mesosphere.com/blog/2015/10/14/docker-registries-the-good-the-bad-the-ugly/)
[Docker Tip #50: Running an Insecure Docker Registry ‚Äî Nick Janetakis](https://nickjanetakis.com/blog/docker-tip-50-running-an-insecure-docker-registry)
[Hosted Docker Registry | Deploy Docker Container | Rancher](https://rancher.com/comparing-four-hosted-docker-registries/)
[Container Registries You Might Have Missed](https://rancher.com/container-registries-might-missed/) hosted and self-hosted

[Quay](https://quay.io/) also provides hosting of Docker images and automated builds.

[MicroBadger](https://microbadger.com/#/) Link your Docker image and the
source it was built from

### Docker Hub Automated build

[Configure automated builds on Docker Hub | Docker Documentation](https://docs.docker.com/docker-hub/builds/)

To trigger the automated build:

1. push empty commit to your repo; OR
2. go the

### Docker Registry

You can host your own [Docker Registry](https://docs.docker.com/registry/).
[Deploy a registry server | Docker Documentation](https://docs.docker.com/registry/deploying/)
[Configuring a secure private registry](http://port.us.org/docs/How-to-setup-secure-registry.html)
[Sharing a local registry with minikube ‚Äì Hasura](https://blog.hasura.io/sharing-a-local-registry-for-minikube-37c7240d0615)
[Your own private docker registry with digitalocean and caddy](https://medium.com/@pcj/your-own-private-docker-repository-with-digitalocean-and-caddy-aug-26-2017-3e30859363ae)
[Rancher 2 Private Docker Registry? - Rancher 2.x - Rancher Forums](https://forums.rancher.com/t/rancher-2-private-docker-registry/12541/2)
Docker Engine would not pull from non TLS registry by default, do use HTTPS.
You have to add your self-signed cert to Docker daemon AND restart it to be able to pull from private registry.

[docker/distribution: The Docker toolset to pack, ship, store, and deliver content](https://github.com/docker/distribution) Distribution = Registry v2, the new implementation
[library/registry - Docker Hub](https://hub.docker.com/_/registry/)
[BlackGlory/caddy-proxy: Automated caddy proxy for Docker containers using docker-gen](https://github.com/BlackGlory/caddy-proxy)
[tumblr/docker-registry-pruner: Tool to apply retention logic to docker images in a Docker Registry](https://github.com/tumblr/docker-registry-pruner)

```sh
docker run -d -p 5000:5000 \
  -v $(pwd)/config.yml:/etc/docker/registry/config.yml \
  --name=docker_registry \
  registry:2
```

[Portus](http://port.us.org/) authorization service for your Docker registry

On Swarm Mode setup, each node can use the Registry at `localhost:5000`.

#### Deleting images

[Docker Registry 2.0 - how to delete unused images? - Stack Overflow](https://stackoverflow.com/a/48950176/665507)
[Garbage collection | Docker Documentation](https://docs.docker.com/registry/garbage-collection/)

Deleting images is [a bit trickery](https://blog.lab99.org/post/docker-2016-07-14-faq.html#ru-he-shan-chu-si-you-registry-zhong-de-jing-xiang), you have to enable the config, use digest to DELETE, and manually run GC
[burnettk/delete-docker-registry-image: If you are running a private v2 docker registry, and you are storing your data on disk, running this script from the machine where the data lives will let you fully delete an image or tag](https://github.com/burnettk/delete-docker-registry-image)

### Harbor

[Harbor](https://goharbor.io/)
[Locking Down Kubernetes Security, Compliance with Harbor - YouTube](https://www.youtube.com/watch?v=VOQG8w5bJxc)

Harbor Registry is VMware's answer for hosting Docker images. This registry is built on the foundation of Docker Distribution, but it adds security and identity-management features. It also supports multiple registries on a single host.

[Locking Down Kubernetes Security, Compliance with Harbor - The New Stack](https://thenewstack.io/locking-down-kubernetes-security-compliance-with-harbor/)

### Notable Images

[docker-library/official-images: Docker Official Images](https://github.com/docker-library/official-images)

- [docker-dev](https://hub.docker.com/_/docker-dev/)
- [ubuntu](https://hub.docker.com/_/ubuntu/), [phusion/baseimage/](https://hub.docker.com/r/phusion/baseimage/)
- [google/debian](https://hub.docker.com/r/google/debian/)
- [wordpress](https://hub.docker.com/_/wordpress/)
- [node](https://hub.docker.com/_/node/) [cusspvz/node/](https://hub.docker.com/r/cusspvz/node/)
- [redmine](https://hub.docker.com/_/redmine/) [sameersbn/docker-redmine](https://github.com/sameersbn/docker-redmine)
- [jenkins](https://hub.docker.com/_/jenkins/)
- [cptactionhank/atlassian-jira-software](https://hub.docker.com/r/cptactionhank/atlassian-jira-software/)
- [gitlab/gitlab-ce](https://hub.docker.com/r/gitlab/gitlab-ce/)
- [mariadb](https://hub.docker.com/_/mariadb/)

[Introducing Deep Learning Containers: Consistent and portable environments | Google Cloud Blog](https://cloud.google.com/blog/products/ai-machine-learning/introducing-deep-learning-containers-consistent-and-portable-environments)

[cusspvz/node.docker: Super small Node.js container (~15MB) based on Alpine Linux OS](https://github.com/cusspvz/node.docker)
[BretFisher/node-docker-good-defaults: sample node app for Docker examples](https://github.com/BretFisher/node-docker-good-defaults)

[renoirb/nginx-http2-luajit/](https://hub.docker.com/r/renoirb/nginx-http2-luajit/)
[ficusio/openresty/](https://hub.docker.com/r/ficusio/openresty/)
[openresty/openresty](https://hub.docker.com/r/openresty/openresty/)

[axibase/dockers at sftp](https://github.com/axibase/dockers/tree/sftp)

[nicolaka/netshoot: a Docker + Kubernetes network trouble-shooting swiss-army container](https://github.com/nicolaka/netshoot)
[jgamblin/tcpdump/](https://hub.docker.com/r/jgamblin/tcpdump/) [post](http://jerrygamblin.com/2016/05/28/a-docker-container-to-capture-all-traffic-from-host/)

[ironPeak services](https://github.com/ironPeakServices?type=source)
[ironPeakServices/iron-redis: Secure base image for running Redis.](https://github.com/ironPeakServices/iron-redis)
[ironPeakServices/scratch-go: Secure base image for running Go applications.](https://github.com/ironPeakServices/scratch-go)

[u/sameersbn/](https://hub.docker.com/u/sameersbn/) many useful CaaS and great instructions
[u/dperson/](https://hub.docker.com/u/dperson/) many useful CaaS and great configuration script
[r/phusion/](https://hub.docker.com/r/phusion/) of the Passenger fame

[dperson/samba/](https://hub.docker.com/r/dperson/samba/)
[dperson/gogs/](https://hub.docker.com/r/dperson/gogs/)

[u/centurylink/](https://hub.docker.com/u/centurylink/)
[centurylink/buildpack-runner/](https://hub.docker.com/r/centurylink/buildpack-runner/)

[u/linuxserver/](https://hub.docker.com/u/linuxserver/) [source](https://github.com/linuxserver)
[Images built by us - LinuxServer](https://www.linuxserver.io/our-images/)

[r/bitnami/](https://hub.docker.com/r/bitnami/)
[Bitnami Container Images for Docker](https://bitnami.com/docker)
[Bitnami on GitHub](https://github.com/bitnami)
[bitnami-docker/subrion.md at master ¬∑ bitnami/bitnami-docker](https://github.com/bitnami/bitnami-docker/blob/master/tutorials/subrion.md) tutorial with Docker Compose

[dockerfiles/devel at master ¬∑ tmc/dockerfiles](https://github.com/tmc/dockerfiles/tree/master/devel)

## On the contrary

[Docker Misconceptions](https://valdhaus.co/writings/docker-misconceptions/) tips/alternatives for using docker in production

[A first look at docker.io | woah!](http://www.alexhudson.com/2013/05/28/a-first-look-at-docker-io/)
[LXC containers are awesome, but Docker.io sucks | Cal Leeming Blog](http://iops.io/blog/lxc-application-containers-docker-initial-thoughts/)
[boycott docker](http://www.boycottdocker.org/)
[The world of containers doesn't end with Docker | InfoWorld](http://www.infoworld.com/article/2881462/virtualization/the-world-of-containers-doesnt-end-with-docker.html)
App packaged as container is great for portability, but replication, scalability and security requires helping hands from a larger ecosystem.
[The sad state of sysadmin in the age of containers](http://www.vitavonni.de/blog/201503/2015031201-the-sad-state-of-sysadmin-in-the-age-of-containers.html) "devops" deploy untrusted container in production is a bad thing
[Koding‚Äôs Migration From Containers to Virtual Machines | Software Engineering Daily](https://softwareengineeringdaily.com/2016/02/11/from-containers-and-docker-to-virtual-machines/)

---

## Installation

> you do need latest Docker, the one in you distro is probably outdated
> Arch Linux users should use the one in official repo

```sh
# install script for most Linux distro
# > I now recommend install from package!!
# !! need su !!
curl -fsSL https://get.docker.com/ | sh
systemctl enable --now docker
usermod -aG docker $(id -un)
docker -v  # should >= 17.05

# https://github.com/docker/compose/releases
curl -L https://github.com/docker/compose/releases/download/1.24.0/docker-compose-`uname -s`-`uname -m` > /usr/local/bin/docker-compose
chmod a+x /usr/local/bin/docker-compose

# https://github.com/docker/machine/releases
curl -L https://github.com/docker/machine/releases/download/v0.16.1/docker-machine-`uname -s`-`uname -m` > /usr/local/bin/docker-machine
chmod a+x /usr/local/bin/docker-machine
```

[Install Docker Engine](https://docs.docker.com/install/)
[Get Docker CE for ubuntu | Docker Documentation](https://docs.docker.com/install/linux/docker-ce/ubuntu/) Install from package (this is troublesome after the package split in 18.09)
https://download.docker.com/linux/ubuntu/dists/xenial/pool/stable/amd64/
[Install Docker PPA on Ubuntu 16.04 With Good Defaults](https://www.bretfisher.com/install-docker-ppa-on-ubuntu-16-04/)
[How To Install and Use Docker on Ubuntu 18.04 | DigitalOcean](https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-on-ubuntu-18-04) check repo used
[Docker - ArchWiki](https://wiki.archlinux.org/index.php/Docker)

## Windows/Mac

[Docker for Mac and Windows Beta: the simplest way to use Docker on your laptop | Docker Blog](https://blog.docker.com/2016/03/docker-for-mac-windows-beta/)
[What you need to know about Docker in Windows | InfoWorld](http://www.infoworld.com/article/3163257/application-development/what-you-need-to-know-about-docker-in-windows.html) Windows Server 2016 support Docker natively
[Build and run your first Docker Windows Server container - Docker Blog](https://blog.docker.com/2016/09/build-your-first-docker-windows-server-container/)
[How to set up Docker and Windows Subsystem for Linux: A Love Story. üíö](https://medium.freecodecamp.org/how-to-set-up-docker-and-windows-subsystem-for-linux-a-love-story-35c856968991)

[Under the Hood: Demystifying Docker For Mac CE Edition ‚Äì Collabnix](http://collabnix.com/how-docker-for-mac-works-under-the-hood/)
[Top 5 Exclusive Features of Docker For Mac That You Can‚Äôt Afford to Ignore ‚Äì Collabnix](http://collabnix.com/top-5-exclusive-features-of-docker-for-mac-that-you-cant-afford-to-miss/)
[Context Switching Made Easy under Kubernetes powered Docker for Mac 18.02.0 ‚Äì Collabnix](http://collabnix.com/namespace-context-toggling-made-easy-under-docker-for-mac-18-02-release/)

## Quickstart

[Get Started, Part 1: Orientation and setup | Docker Documentation](https://docs.docker.com/get-started/)
[A crash course on Docker ‚Äî Learn to swim with the big fish](https://blog.sourcerer.io/a-crash-course-on-docker-learn-to-swim-with-the-big-fish-6ff25e8958b0)

```sh
docker pull ubuntu:14.04
# created an interactive named container
docker run -it --name ubuntu ubuntu:14.04 bash
# mounting your home and use it as working directory
docker run -it -v /home/user:/home/user -w /home/user ubuntu:14.04 bash
# a read-only container with ram drives
docker run --read-only --tmpfs /run --tmpfs /tmp -it ubuntu:14.04 /bin/bash
```

## Docker CLI

[Use the Docker command line](https://docs.docker.com/engine/reference/commandline/cli/)
Config and aliases can be stored in `~/.docker/config.json`

[Docker Basic Command | Fast Deploying Systems With Docker](http://chunchio.gitbooks.io/docker/content/DockerBasicCommand.html)
[wsargent/docker-cheat-sheet: Docker Cheat Sheet](https://github.com/wsargent/docker-cheat-sheet)
[j-bennet/wharfee: A CLI with autocompletion and syntax highlighting for Docker commands.](https://github.com/j-bennet/wharfee)
[CLI Tips and Tricks (From Docker Online Meetup)](https://www.bretfisher.com/docker-cli-tips-and-tricks/)
[10 Tips & Tricks with Docker - Mercure News](https://mercurenews.com/en/10-tips-tricks-with-docker/)

[jmkhael/make-for-docker: Makefile to ease our Docker commands - http://jmkhael.io/makefiles-for-your-dockerfiles/](https://github.com/jmkhael/make-for-docker)
[j-bennet/wharfee: A CLI with autocompletion and syntax highlighting for Docker commands.](https://github.com/j-bennet/wharfee)

`docker run IMAGE [CMD]`: create an container and execute command
`docker create IMAGE`: create an container
`docker exec CONTAINER CMD`: execute command in a running container
`docker port CONTAINER`: list port mappings
`docker ps`: list started containers
`docker ps -as`: list all containers, with size (slower)
`docker images`: list all images
`docker cp`: copy file between a container and the host
`docker rm CONTAINER`: remove container
`docker rmi IMAGE`: remove image

### Image

[Get Started, Part 2: Containers | Docker Documentation](https://docs.docker.com/get-started/part2/#share-your-image)
[Today I Learned: Pull Docker Image from GCR (Google Container Registry) in any non-GCP Kubernetes‚Ä¶ - By Iman Tumorang](https://hackernoon.com/today-i-learned-pull-docker-image-from-gcr-google-container-registry-in-any-non-gcp-kubernetes-5f8298f28969)

Full image tag: `[REGISTRYHOST/][USERNAME/]NAME[:TAG]`
Image can be thought of as a static snapshot of a container.

`docker build`: build `Dockerfile` as image
`docker history`: list layers and commands creating it
`docker pull|push IMAGE`: pull/push image from/to Docker Hub ([Automated Builds](https://docs.docker.com/docker-hub/builds/) does this for git repo)
`docker diff CONTAINER`: view changes to file system
`docker commit CONTAINER IMAGE`: save container (with modification) as image
`docker export CONTAINER`: export container as tarball (used for flattening layers)
`docker import TAR`: create an image from docker
`docker tag IMAGE TAG`: add image to namespace (user)
`docker push IMAGE`: publish image to Docker Hub
`docker save -o TAR IMAGE`: save image as tar
`docker load -i TAR`: load local image

[Difference between save and export in Docker ‚Äì Thomas Uhrig](http://tuhrig.de/difference-between-save-and-export-in-docker/)
[Moving Docker Containers and Images Around](https://blog.giantswarm.io/moving-docker-container-images-around/)
TL;DR: save/load preserves layers and tags, export/import don't

### `docker run`

[Docker run reference](https://docs.docker.com/engine/reference/run/)

| Option          | Remark                                                                                                |
| --------------- | ----------------------------------------------------------------------------------------------------- |
| `-it`           | create an interactive TTY; <kbd>Ctrl</kbd> + <kbd>P</kbd>, <kbd>Ctrl</kbd> + <kbd>Q</kbd> to from it  |
| `-v SRC:TARGET` | mount volume to container, SRC can be an absolute path on Docker Host or a Docker volume name         |
| `-w`            | specify working directory                                                                             |
| `-p P1:P2`      | map host's port P1 to port P2 in container, omitting P1 to bind to random Host port                   |
| `-P`            | publish all exposed ports to random ports on host                                                     |
| `-e`            | set environment variable                                                                              |
| `-h`            | set hostname of container                                                                             |
| `-l`            | set label of container                                                                                |
| `-a`            | attach to a running container                                                                         |
| `-d`            | run container in detached mode, returns CONTAINER_ID; `docker attach CONTAINER` to attach to it later |
| `--rm`          | remove container upon exit                                                                            |
| `--read-only`   | make RFS read only                                                                                    |

## Builder

[Dockerfile](https://docs.docker.com/engine/reference/builder/)
[Best practices for writing Dockerfiles | Docker Documentation](https://docs.docker.com/develop/develop-images/dockerfile_best-practices/)
[Intro Guide to Dockerfile Best Practices - Docker Blog](https://www.docker.com/blog/intro-guide-to-dockerfile-best-practices/)
[Dockerfile : Best practices for building an image | by Maxime Lafond | The Startup | Medium](https://medium.com/swlh/dockerfile-best-practices-for-building-an-image-6120e512b1fa)
[Container Best Practices: What They Are and Why You Should Care ‚Äì The New Stack](https://thenewstack.io/container-best-practices-what-they-are-and-why-you-should-care/)
[hexops/dockerfile: Dockerfile best-practices for writing production-worthy Docker images.](https://github.com/hexops/dockerfile)

[Build secrets and SSH forwarding in Docker 18.09 ‚Äì T√µnis Tiigi ‚Äì Medium](https://medium.com/@tonistiigi/build-secrets-and-ssh-forwarding-in-docker-18-09-ae8161d066)
[Docker build secrets, the sneaky way](https://pythonspeed.com/articles/docker-build-secrets/)

Builder log (annotated):

```
Sending build context to Docker daemon  2.048kB
Step 1/3 : FROM ubuntu:xenial
 ---> 747cb2d60bbe                              # image ID
Step 2/3 : RUN touch /tmp/foo
 ---> Running in 123624a3b7e7                   # container ID
 ---> bb7b8fc505de                              # committed image ID
Step 3/3 : RUN touch /tmp/bar
 ---> Running in a595d46e5ea5                   # container ID
 ---> 8e1a34ff9fb7                              # committed image ID
Removing intermediate container 123624a3b7e7
Removing intermediate container a595d46e5ea5
Successfully built 8e1a34ff9fb7                 # image ID to be tagged
Successfully tagged demo:latest
```

So you can actually `docker run bb7b8fc505de ls /tmp` to see only `foo` but not `bar`.
This actually sets breakpoint in your Dockerfile for debugging.

[image-spec/annotations.md at master ¬∑ opencontainers/image-spec](https://github.com/opencontainers/image-spec/blob/master/annotations.md)
[Shipping Manifests, Bill of Lading and Docker - Metadata for Containers - YouTube](https://www.youtube.com/watch?v=j4SZ1qoR8Hs) [slides](https://speakerdeck.com/garethr/shipping-manifests-bill-of-lading-and-docker-metadata-and-container)

```
--label org.opencontainers.image.created=$(date --iso-8601=s)
--org.opencontainers.image.revision=$(git rev-parse HEAD)
```

[Dockerize: A tiny replacement for Dockerfiles](https://gist.github.com/wjordan/f9f640727c06d46172e6)

[Dockerfile Best Practices](http://crosbymichael.com/dockerfile-best-practices.html)
[Dockerfile Best Practices - take 2](http://crosbymichael.com/dockerfile-best-practices-take-2.html)
[Understanding and Creating Effective Docker Images - DZone Cloud](https://dzone.com/articles/understanding-amp-creating-effective-docker-images)
[Common Dockerfile Mistakes - Atlassian Developers](https://developer.atlassian.com/blog/2016/06/common-dockerfile-mistakes/)
[9 Common Dockerfile Mistakes - Runnablog](https://runnable.com/blog/9-common-dockerfile-mistakes)
[Gotchas in Writing Dockerfile | kim hirokuni](http://kimh.github.io/blog/en/docker/gotchas-in-writing-dockerfile-en/)
[Docker cache and apt-get update. ‚Äì Dat's homepage](http://lenguyenthedat.com/docker-cache/) `update` and `install` in the same `RUN`
[Jonathan Bergknoff: Building Good Docker Images](http://jonathan.bergknoff.com/journal/building-good-docker-images)
[Guidance for Docker Image Authors ‚Äî Project Atomic](http://www.projectatomic.io/docs/docker-image-author-guidance/)
[Do not ignore .dockerignore (it's expensive and potentially dangerous) - Codefresh](https://codefresh.io/blog/not-ignore-dockerignore/)
[Unprivileged Docker Builds ‚Äì A Proof of Concept ‚Äì zwischenzugs](https://zwischenzugs.com/2018/04/23/unprivileged-docker-builds-a-proof-of-concept/)

[Caching Docker Images - CenturyLink Cloud Developer Center](https://www.ctl.io/developers/blog/post/caching-docker-images)
[Optimizing Docker Images - CenturyLink Cloud Developer Center](https://www.ctl.io/developers/blog/post/optimizing-docker-images/)
[How to Maximize Your Docker Image Caching Techniques - CenturyLink Cloud Developer Center](https://www.ctl.io/developers/blog/post/more-docker-image-cache-tips/)
[Dockerfile: ADD vs COPY - CenturyLink Cloud Developer Center](https://www.ctl.io/developers/blog/post/dockerfile-add-vs-copy/)

### Modern ways

[The hunt for a better Dockerfile](https://matduggan.com/the-hunt-for-a-better-dockerfile/)
[Are Dockerfiles good enough?](https://matduggan.com/are-dockerfiles-good-enough/)
[Building containers without Docker](https://blog.alexellis.io/building-containers-without-docker/)

### Buildkit (new builder)

[moby/buildkit: concurrent, cache-efficient, and Dockerfile-agnostic builder toolkit](https://github.com/moby/buildkit)
[buildkit/buildkit.go at master ¬∑ moby/buildkit](https://github.com/moby/buildkit/blob/master/examples/buildkit1/buildkit.go) build script in Go

[Build images with BuildKit | Docker Documentation](https://docs.docker.com/develop/develop-images/build_enhancements/)
[buildkit/syntax.md at master ¬∑ moby/buildkit](https://github.com/moby/buildkit/blob/master/frontend/dockerfile/docs/syntax.md) new syntax in Dockerfile
[docker/dockerfile - Docker Image | Docker Hub](https://hub.docker.com/r/docker/dockerfile/)

[Martin Heinz - Building Docker Images The Proper Way](https://martinheinz.dev/blog/42) 2021, BuildKit (experimental)

[Introduction to heredocs in Dockerfiles - Docker Blog](https://www.docker.com/blog/introduction-to-heredocs-in-dockerfiles/)

[docker/buildx: Docker CLI plugin for extended build capabilities with BuildKit](https://github.com/docker/buildx) `dokcer buildx` invokes Buildkit
[Cutting Build Time In Half with Docker‚Äôs Buildx Kubernetes Driver](https://releasehub.com/blog/cutting-build-time-in-half-docker-buildx-kubernetes)

### Buildah

[Buildah | buildah.io](https://buildah.io/)
[containers/buildah: A tool that facilitates building OCI images](https://github.com/containers/buildah)
[buildah/demos at main ¬∑ containers/buildah](https://github.com/containers/buildah/tree/main/demos)
[Getting started with Buildah | Red Hat Developer](https://developers.redhat.com/blog/2021/01/11/getting-started-with-buildah)

[Buildah: Build containers fast and easy without Docker - JAXenter](https://jaxenter.com/build-containers-quickly-buildah-155839.html)
[Unprivileged Docker Builds ‚Äì A Proof of Concept ‚Äì zwischenzugs](https://zwischenzugs.com/2018/04/23/unprivileged-docker-builds-a-proof-of-concept/)
[Build containers in GitLab CI with buildah :: major.io](https://major.io/2019/05/24/build-containers-in-gitlab-ci-with-buildah/)
[buildah error: vfs driver does not support overlay.mountopt options :: major.io](https://major.io/2019/08/13/buildah-error-vfs-driver-does-not-support-overlay-mountopt-options/)

[ansible-community/ansible-bender: ansible-playbook + buildah = a sweet container image](https://github.com/ansible-community/ansible-bender)
[Build and run Buildah inside a Podman container - Red Hat Developer Blog](https://developers.redhat.com/blog/2019/04/04/build-and-run-buildah-inside-a-podman-container/)

### ARG and ENV

[Docker ARG, ENV and .env - a Complete Guide ¬∑ vsupalov](https://vsupalov.com/docker-arg-env-variable-guide/)
[Arguments and variables in Docker ‚Äì manifoldco](https://blog.manifold.co/arguments-and-variables-in-docker-94746642f64b)

[Docker Environment Configs, Variables, and Entrypoints | DevOps and Docker Talk](https://ddt.transistor.fm/episodes/docker-environment-configs-variables-and-entrypoints)

### Multi-stage builds

[Use multi-stage builds | Docker Documentation](https://docs.docker.com/develop/develop-images/multistage-build/)
[Advanced Dockerfiles: Faster Builds and Smaller Images Using BuildKit and Multistage Builds - Docker Blog](https://www.docker.com/blog/advanced-dockerfiles-faster-builds-and-smaller-images-using-buildkit-and-multistage-builds/)

[Builder pattern vs. Multi-stage builds in Docker](https://blog.alexellis.io/mutli-stage-docker-builds/)
[Docker build patterns ‚Äî Matthias Noback - Blog](https://matthiasnoback.nl/2017/04/docker-build-patterns/)
[Straightforward multi-stage build with a single Dockerfile (and a Makefile)](https://medium.com/@xcoulon/straightforward-multi-stage-build-with-a-single-dockerfile-and-a-makefile-dd558fd9acff)
[Advanced multi-stage build patterns ‚Äì T√µnis Tiigi ‚Äì Medium](https://medium.com/@tonistiigi/advanced-multi-stage-build-patterns-6f741b852fae)
[Lightweight Docker images with Alpine ‚Äì Anuradha Weeraman | Blog](https://weeraman.com/lightweight-docker-images-with-alpine-5dc21936f689)
[Using docker multi-stage builds for deploying front-end](https://medium.com/@saabeilin/using-docker-multi-stage-builds-for-deploying-front-end-44ee6783322e)
[Leveraging Multi-stage Builds to use a Single Dockerfile for Dev and Prod ‚Äì mikesir87's blog](https://blog.mikesir87.io/2018/07/leveraging-multi-stage-builds-single-dockerfile-dev-prod/)

[Can You Mount a Volume While Building Your Docker Image to Cache Dependencies? ¬∑ vsupalov](https://vsupalov.com/cache-docker-build-dependencies-without-volume-mounting/) Use intermediate image

### Image Analysis

[MicroBadger](https://microbadger.com/)
https://microbadger.com/images/openjdk:11-slim

[Docker Layers Explained - DZone Cloud](https://dzone.com/articles/docker-layers-explained)

[wagoodman/dive: A tool for exploring each layer in a docker image](https://github.com/wagoodman/dive)
[shaded-enmity/docker-doug: DOUG - DOcker Update Guard](https://github.com/shaded-enmity/docker-doug)

[Introducing container-diff, a tool for quickly comparing container images | Google Open Source Blog](https://opensource.googleblog.com/2017/11/container-diff-for-comparing-container-images.html)
[GoogleContainerTools/container-diff: container-diff: Diff your Docker containers](https://github.com/GoogleContainerTools/container-diff)

[CenturyLinkLabs/dockerfile-from-image](https://github.com/CenturyLinkLabs/dockerfile-from-image)

[Container Image Immutability and the Power of Metadata - via @codeship | via @codeship](https://blog.codeship.com/container-image-immutability-power-metadata/)
[Explaining Docker Image IDs](http://www.windsock.io/explaining-docker-image-ids/)
[MicroBadger](https://microbadger.com/)
[Finding the layers and layer sizes for each Docker image - Stack Overflow](http://stackoverflow.com/questions/29696656/finding-the-layers-and-layer-sizes-for-each-docker-image)

```sh
docker history IMAGE
docker history --no-trunc IMAGE
```

## Builder (3rd party)

[GoogleContainerTools/kaniko: Build Container Images In Kubernetes](https://github.com/GoogleContainerTools/kaniko)
[Building Docker images with Kaniko ‚Äì Sebastien Goasguen ‚Äì Medium](https://medium.com/@sebgoa/building-docker-images-with-kaniko-6e2421b018)

## Tiny Image

[Create the smallest possible Docker container | Xebia Blog](http://blog.xebia.com/create-the-smallest-possible-docker-container/) with statically linked Go executables
[How to create the smallest possible docker container of any image | Xebia Blog](http://blog.xebia.com/how-to-create-the-smallest-possible-docker-container-of-any-image/)
[Simplify the Smallest Possible Docker Image ‚Äì Adriaan de Jonge ‚Äì Medium](https://medium.com/@adriaandejonge/simplify-the-smallest-possible-docker-image-62c0e0d342ef)
[Building Docker Images for Static Go Binaries ‚Äî Medium](https://medium.com/@kelseyhightower/optimizing-docker-images-for-static-binaries-b5696e26eb07)
[Slim application containers (using Docker) | fosiki](http://fosiki.com/blog/2015/04/28/slim-application-containers-using-docker/)
[How to build an optimal Docker image for your application? - Event-Driven.io](https://event-driven.io/en/how_to_buid_an_optimal_docker_image_for_your_application/)
[Reducing Your Docker Image Size - via @codeship | via @codeship](https://blog.codeship.com/reduce-docker-image-size/)
[Optimizing Docker Images - CenturyLink Cloud Developer Center](https://www.ctl.io/developers/blog/post/optimizing-docker-images/)
[William-Yeh/docker-mini: Quest for minimal Docker images: slides and lab materials.](https://github.com/William-Yeh/docker-mini)
[Alpine Linux: Lightweight Docker Java Images | Takipi Blog](http://blog.takipi.com/lean-mean-java-virtual-machine-making-your-docker-7x-lighter-with-alpine-linux/)
[Refactoring a Dockerfile for image size](https://blog.replicated.com/refactoring-a-dockerfile-for-image-size/)
[3 simple tricks for smaller Docker images ‚ô¶Ô∏é Learnk8s](https://learnk8s.io/blog/smaller-docker-images/)

[DockerSlim - Optimize Your Containerized App Dev Experience. Better, Smaller, Faster, and More Secure Containers Doing Less! Minify Docker Images by up to 30x.](https://dockersl.im/)
[Squashing Docker Images ¬∑](http://jasonwilder.com/blog/2014/08/19/squashing-docker-images/)
[jwilder/docker-squash: Squash docker images to make them smaller](https://github.com/jwilder/docker-squash)
`docker commit; docker save image | docker-squash -t newtag | docker load`
[aidanhs/dlgrab: docker layer grabber](https://github.com/aidanhs/dlgrab)
[cloudimmunity/docker-slim: Optimize and secure your Docker containers](https://github.com/cloudimmunity/docker-slim)
[djosephsen/skinnywhale: Skinnywhale helps you make smaller (as in megabytes) Docker containers](https://github.com/djosephsen/skinnywhale)
[mvanholsteijn/strip-docker-image: Utility to strip Docker images to their bare minimum size.](https://github.com/mvanholsteijn/strip-docker-image)
[Blitznote/debase: üì¶ minimal Ubuntu for containers, with curl and support for TLSv1.3](https://github.com/Blitznote/debase)

[Inside Docker's "FROM scratch" ¬∑ Do not go gentle into this good night. Rage.](https://embano1.github.io/post/scratch)
[Create lightweight Docker containers with Buildroot | Docker Blog](https://blog.docker.com/2013/06/create-light-weight-docker-containers-buildroot/)

[Introducing gockerize | AeroFS](https://www.aerofs.com/introducing-gockerize-md/)
[redbooth/gockerize: Package golang service into minimal docker containers.](https://github.com/redbooth/gockerize)

[Don't Put Fat Jars in Docker Images](https://phauer.com/2019/no-fat-jar-in-docker-image/)
[GoogleContainerTools/jib: üèó Build container images for your Java applications.](https://github.com/GoogleContainerTools/jib)

On the contrary:
[Docker Containers: Smaller is not always better ¬ª Ramblings](http://matthewkwilliams.com/index.php/2015/04/19/docker-containers-smaller-is-not-always-better/)

### distroless

[GoogleContainerTools/distroless: ü•ë Language focused docker images, minus the operating system.](https://github.com/GoogleContainerTools/distroless)
[distroless/README.md at master ¬∑ GoogleContainerTools/distroless](https://github.com/GoogleContainerTools/distroless/blob/master/base/README.md)
[2017 swampUP Sessions | Distroless Docker: Containerizing Apps, not VMs - Matthew Moore - YouTube](https://www.youtube.com/watch?v=lviLZFciDv4)

[Stories of My Experiments with "Distroless" Containers](https://www.abhaybhargav.com/stories-of-my-experiments-with-distroless-containers/)

### Containerizing Build environment

[Habitus |Build Flow Tool for Docker](http://www.habitus.io/)
[cisco/elsy: An opinionated, multi-language, build tool based on Docker and Docker Compose](https://github.com/cisco/elsy)

[Crafting perfect Java Docker build flow - Codefresh](https://codefresh.io/blog/java_docker_pipeline/)
[redbooth/gockerize: Package golang service into minimal docker containers.](https://github.com/redbooth/gockerize)

> my presentation and repo

### Iron.io

[Microcontainers: Iron.io's New Hack to Shrink Docker Containers - The New Stack](http://thenewstack.io/microcontainers-iron-ios-new-hack-shrink-docker-containers/)
[Microcontainers - Tiny, Portable Docker Containers | Iron.ioIron.io](http://www.iron.io/microcontainers-tiny-portable-containers/)
[An Easier Way to Create Tiny Golang Docker Images | Iron.ioIron.io](http://www.iron.io/an-easier-way-to-create-tiny-golang-docker-images/)

## Tips and Tricks

[Docker - Application Guides](https://success.docker.com/solutions#appguide)
[Introducing Docker Application Guides - Docker Blog](https://blog.docker.com/2018/07/introducing-docker-application-guides/)

[Improve your Docker workflow with this VS Code extension - DEV Community üë©‚Äçüíªüë®‚Äçüíª](https://dev.to/azure/improve-your-docker-workflow-with-this-vs-code-extension-j60)

[mikesir87's blog](https://blog.mikesir87.io/)

[15 Docker Tips in 15 Minutes - YouTube](https://www.youtube.com/watch?v=BJT9bA64Hcc)
[8 great tools that make Docker better | InfoWorld](https://www.infoworld.com/article/2966158/docker/8-great-tools-that-make-docker-better.html)

[Tips and Tricks of the Docker Captains - YouTube](https://www.youtube.com/watch?v=1vgi51f0tCk&index=8&list=PLkA60AVN3hh_dZhew2ypUarxhsh9T7ZEd)
[You're doing it wrong: 5 common Docker mistakes | InfoWorld](http://www.infoworld.com/article/3038675/application-virtualization/youre-doing-it-wrong-5-common-docker-mistakes.html)
[Docker Performance Improvement: Tips and Tricks](https://stackify.com/docker-performance-improvement-tips-and-tricks/amp/)

[Everyday Hacks for Docker - Codefresh](https://codefresh.io/blog/everyday-hacks-docker/)
[DockerCon 2015: Container Hacks in Docker | via @codeship](http://blog.codeship.com/dockercon-2015-container-hacks-in-docker/)
[How to live inside a docker container? | Tit Petriƒç](https://scene-si.org/2016/04/01/how-to-live-inside-a-docker-container/)

[Docker features for handling Container‚Äôs death and resurrection | Sreenivas Makam's Blog](https://sreeninet.wordpress.com/2017/08/15/docker-features-for-handling-containers-death-and-resurrection/)
[Docker healthchecks: why you shouldn't use `curl` or `iwr` | Elton Stoneman](https://blog.sixeyed.com/docker-healthchecks-why-not-to-use-curl-or-iwr/)

[My Favourite Docker Tip ‚Äì zwischenzugs](https://zwischenzugs.com/2015/06/14/my-favourite-docker-tip/) add commands in container to history

[A Simple Way To Dockerize Applications ¬∑](http://jasonwilder.com/blog/2014/10/13/a-simple-way-to-dockerize-applications/)
[jwilder/dockerize: Utility to simplify running applications in docker containers](https://github.com/jwilder/dockerize)
[Java inside docker: What you must know to not FAIL - Red Hat Developer Blog](https://developers.redhat.com/blog/2017/03/14/java-inside-docker/)

[Npm (or Yarn) Install within a Docker Container, the Right Way](https://marmelab.com/blog/2017/02/08/yarn-npm-install-within-docker-container.html) tips are actually not Node.js specific
[An Exhaustive Guide to Writing Dockerfiles for Node.js Web Apps](https://blog.hasura.io/an-exhaustive-guide-to-writing-dockerfiles-for-node-js-web-apps-bbee6bd2f3c4)
[Trick: How to significantly reduce NPM download time for NodeJS Web application on Docker image](https://kobkrit.com/trick-how-to-reduce-npm-download-time-for-nodejs-web-application-on-docker-image-significantly-87d71f287ab7)
[Top 4 Tactics To Keep Node.js Rockin‚Äô in Docker - Docker Blog](https://blog.docker.com/2019/07/keep-nodejs-rockin-in-docker/)

[Production-ready Docker images](https://pythonspeed.com/docker/)
[Cache for python pip downloads and wheels in Docker](https://medium.com/@scythargon/cache-for-python-pip-downloads-and-wheels-in-docker-67f24e7cd84e)
[Dockerizing a Python 3 Flask App Line-by-Line ‚Äì BitCraft ‚Äì Medium](https://medium.com/bitcraft/dockerizing-a-python-3-flask-app-line-by-line-400aef1ded3a)

Check Docker logs:

```sh
sudo journalctl -u docker
docker events
```

### Rootless Docker

[Experimenting with Rootless Docker - T√µnis Tiigi - Medium](https://medium.com/@tonistiigi/experimenting-with-rootless-docker-416c9ad8c0d6)
[Docker 19.03 introduces an experimental rootless Docker mode | Packt Hub](https://hub.packtpub.com/docker-19-03-introduces-an-experimental-rootless-docker-mode-that-helps-mitigate-vulnerabilities-by-hardening-the-docker-daemon/amp/)
[[DockerCon 2019] Hardening Docker daemon with Rootless mode](https://www.slideshare.net/AkihiroSuda/dockercon-2019-hardening-docker-daemon-with-rootless-mode)
[Docker containers with root privileges ‚Äì Neoteric ‚Äì Software House](https://neoteric.eu/blog/docker-containers-with-root-privileges/)
[Docker Without Root Privileges - DZone Cloud](https://dzone.com/articles/docker-without-root-privileges)
[Run Docker nginx as Non-Root-User - DEV Community üë©‚Äçüíªüë®‚Äçüíª](https://dev.to/sophiabrandt/run-docker-nginx-as-non-root-user-2b6b)

[Understanding Docker container escapes | Trail of Bits Blog](https://blog.trailofbits.com/2019/07/19/understanding-docker-container-escapes/)

### Environment variable from files

If you already have a `ENV_FILE`, with `key=value` per line.
In `entrypoint.sh`:

```sh
. ${ENV_FILE}
export $(cut -d= -f1 ${V})
```

```sh
# .env loading in the shell
dotenv () {
  set -a
  [ -f ${ENV_FILE} ] && . ${ENV_FILE}
  set +a
}
```

[bash - How to export variables from a file? - Unix & Linux Stack Exchange](https://unix.stackexchange.com/questions/79064/how-to-export-variables-from-a-file)
[bash - Set environment variables from file - Stack Overflow](https://stackoverflow.com/questions/19331497/set-environment-variables-from-file)

[How to implement runtime environment variables with create-react-app, Docker, and Nginx](https://medium.freecodecamp.org/how-to-implement-runtime-environment-variables-with-create-react-app-docker-and-nginx-7f9d42a91d70)

If you want to load independent variable from different file (`docker secret` compatible):

```sh
#!/bin/bash
#
set -euo pipefail

# usage: file_env VAR [DEFAULT]
#    ie: file_env 'XYZ_DB_PASSWORD' 'example'
# (will allow for "$XYZ_DB_PASSWORD_FILE" to fill in the value of
#  "$XYZ_DB_PASSWORD" from a file, especially for Docker's secrets feature)
file_env() {
	local var="$1"
	local fileVar="${var}_FILE"
	local def="${2:-}"
	if [ "${!var:-}" ] && [ "${!fileVar:-}" ]; then
		echo >&2 "error: both $var and $fileVar are set (but are exclusive)"
		exit 1
	fi
	local val="$def"
	if [ "${!var:-}" ]; then
		val="${!var}"
	elif [ "${!fileVar:-}" ]; then
		val="$(< "${!fileVar}")"
	fi
	export "$var"="$val"
	unset "$fileVar"
}

envs=(
	database__connection__host
	database__connection__user
	database__connection__password
	database__connection__database
)

haveConfig=
for e in "${envs[@]}"; do
	file_env "$e"
	if [ -z "$haveConfig" ] && [ -n "${!e}" ]; then
		haveConfig=1
	fi
done
```

[Support docker secrets for setting environment variables ¬∑ Issue #125 ¬∑ docker-library/ghost](https://github.com/docker-library/ghost/issues/125)
[Docker environment variables expanded from secrets ‚Äì Basilio Vera ‚Äì Medium](https://medium.com/@basi/docker-environment-variables-expanded-from-secrets-8fa70617b3bc)

### `CMD` vs `ENTRYPOINT`

[Dockerfile reference ENTRYPOINT](https://docs.docker.com/engine/reference/builder/#entrypoint)
[Dockerfile: ENTRYPOINT vs CMD - CenturyLink Cloud Developer Center](https://www.ctl.io/developers/blog/post/dockerfile-entrypoint-vs-cmd/)
[Docker ENTRYPOINT & CMD: Dockerfile best practices ‚Äì freeCodeCamp.org](https://medium.freecodecamp.org/docker-entrypoint-cmd-dockerfile-best-practices-abc591c30e21)
[docker - What is the difference between CMD and ENTRYPOINT in a Dockerfile? - Stack Overflow](http://stackoverflow.com/questions/21553353/what-is-the-difference-between-cmd-and-entrypoint-in-a-dockerfile)
[Understanding Docker's CMD and ENTRYPOINT Instructions - via @codeship | via @codeship](https://blog.codeship.com/understanding-dockers-cmd-and-entrypoint-instructions/)

```sh
# default run invocation
# `ENTRYPOINT CMD` will be executed in container
docker run IMAGE CMD
# override ENTRYPOINT
docker run IMAGE --entrypoint ENTRYPOINT CMD
```

Default `ENTRYPOINT` is `/bin/sh -c`, you can override `ENTRYPOINT` with `--entrypoint`.
`docker run` can specify (override) `CMD`, akin to passing parameter to the executable specified by `ENTRYPOINT`.

[Docker Tip #63: Difference between an Array and String Based CMD ‚Äî Nick Janetakis](https://nickjanetakis.com/blog/docker-tip-63-difference-between-an-array-and-string-based-cmd)

[docker run <IMAGE> <MULTIPLE COMMANDS> - Stack Overflow](https://stackoverflow.com/questions/28490874/docker-run-image-multiple-commands) `["sh", "-c", "miltiple CMD with &&"]`
[Running multiple commands in entrypoint ¬∑ Issue #52 ¬∑ docker-library/redmine](https://github.com/docker-library/redmine/issues/52) can use multiline in Compose file

### Executable Images

[Executable Images - How to Dockerize Your Development Machine](http://www.infoq.com/articles/docker-executable-images)
[Using Docker as a Personal Productivity Tool ‚Äì Running Command Line Apps Bundled in Docker Containers | OUseful.Info, the blog...](https://blog.ouseful.info/2016/05/03/using-docker-as-a-personal-productvity-tool-running-command-line-apps/)  
[Distributing Command Line Tools with Docker](https://spin.atomicobject.com/2015/11/30/command-line-tools-docker/)

If you wanted to add arguments to program (`CMD`), the `ENTRYPOINT` must be in JSON array notation.

```dockerfile
# Dockerfile
# ...
ENTRYPOINT ["binary", "--"]
CMD ["--help"]
```

### Specify `uid`,`gid`

Use `-u` to specify the`uid`,`gid` in container.

```sh
docker run -it --rm \
  -u $(id -u):$(id -g) \
  -v $(pwd):/tmp \
  busybox sh

docker run -it --rm \
  -u $(id -u):$(id -g) \
  -v $(pwd):/build -w /build \
  -v "$HOME/.m2":/.m2 \
  maven:3-jdk-8-openj9 bash
```

[Understanding how uid and gid work in Docker containers](https://medium.com/@mccode/understanding-how-uid-and-gid-work-in-docker-containers-c37a01d01cf)
[How docker replaced my virtual machines and chroots - Gernot on developing Software](http://gernotklingler.com/blog/docker-replaced-virtual-machines-chroots/) generating image with \${USER}
[managing users in docker ¬∑ rocker-org/rocker Wiki](https://github.com/rocker-org/rocker/wiki/managing-users-in-docker)
[Deni Bertovic :: Handling Permissions with Docker Volumes](https://denibertovic.com/posts/handling-permissions-with-docker-volumes/)
[What is the (best) way to manage permissions for docker shared volumes - Stack Overflow](http://stackoverflow.com/questions/23544282/what-is-the-best-way-to-manage-permissions-for-docker-shared-volumes)
[Work With Non-Root Containers for Bitnami Applications](https://docs.bitnami.com/containers/how-to/work-with-non-root-containers/)

Use user namespaces introduced in 1.10:

> see `container-ecosystem.md#security`

### Init system

[krallin/tini: A tiny but valid `init` for containers](https://github.com/krallin/tini) built-in since 1.13+ and CE
[Yelp/dumb-init: A minimal init system for Linux containers](https://github.com/Yelp/dumb-init/)

[Docker and the PID 1 zombie reaping problem](https://blog.phusion.nl/2015/01/20/docker-and-the-pid-1-zombie-reaping-problem/)
[What is advantage of Tini? ¬∑ Issue #8 ¬∑ krallin/tini](https://github.com/krallin/tini/issues/8#issuecomment-146135930)

### Wait for service

[vishnubob/wait-for-it: Pure bash script to test and wait on the availability of a TCP host and port](https://github.com/vishnubob/wait-for-it)

[eficode/wait-for: ./wait-for is a script to wait for another service to become available.](https://github.com/Eficode/wait-for) bash/alpine compatible

### Supervisor connection refused

OverlayFS have problem creating Unix socket, add `--tmpfs /var/run/` in `docker run`.

https://github.com/Supervisor/supervisor/issues/654
https://github.com/moby/moby/issues/12080

### User Namespaces

Remap a host user to root in container with `--userns-remap`.

[Docker - Introduction to User Namespaces in Docker Engine](https://success.docker.com/article/Introduction_to_User_Namespaces_in_Docker_Engine)
[Filesystem images and unprivileged containers [LWN.net]](https://lwn.net/Articles/700422/)

[User namespaces - Phase 2 ¬∑ Issue #28593 ¬∑ moby/moby](https://github.com/moby/moby/issues/28593)
[Failed to mount /sys/fs/cgroup when user namespace is enabled. ¬∑ Issue #27629 ¬∑ moby/moby](https://github.com/moby/moby/issues/27629)
[User namespaces don't work if there is a mount on /proc ¬∑ Issue #26070 ¬∑ moby/moby](https://github.com/moby/moby/issues/26070)
[docker --userns-remap @ubuntu 16.04 fails ¬∑ Issue #22633 ¬∑ moby/moby](https://github.com/moby/moby/issues/22633)

### Filtering

```sh
$ docker ps --filter "name=nostalgic"
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
715ebfcee040        busybox             "top"               3 seconds ago       Up 1 second                             i_am_nostalgic
9b6247364a03        busybox             "top"               7 minutes ago       Up 7 minutes                            nostalgic_stallman
673394ef1d4c        busybox             "top"               38 minutes ago      Up 38 minutes                           nostalgic_shockley

$ docker images --filter=reference='busy*:*libc'
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
busybox             uclibc              e02e811dd08f        5 weeks ago         1.09 MB
busybox             glibc               21c16b6787c6        5 weeks ago         4.19 MB

# note the '/' is required
$ docker images --filter=reference='dpms/*'
REPOSITORY               TAG                 IMAGE ID            CREATED             SIZE
dpms/dockbeat            latest              316060f478d1        24 hours ago        134MB
dpms/monitor             latest              23e0036ee085        4 days ago          1.25GB
```

### Formatting

{% raw %}

```sh
# list mounted volumes
docker ps -aq | map docker inspect --format "{{.Name}} {{.Mounts}}"
# list network interfaces
docker ps -aq | docker inspect --format="{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}"
# show nodes and labels (Swarm mode)
docker node ls -q | \
xargs docker node inspect --format '{{.Description.Hostname}} {{with .Spec}}{{.Role}}({{.Availability}}) {{.Labels}}{{end}}'
```

{% endraw %}

add `table`, `json` (`--format {{json .}}`) prefix for formatting the output

use `json` directive to inspect fields if default output is table

[Format command and log output | Docker Documentation](https://docs.docker.com/engine/admin/formatting/#template-functions)
[template - The Go Programming Language](https://golang.org/pkg/text/template/)
[Docker Inspect Template Magic - Container Solutions](http://container-solutions.com/docker-inspect-template-magic/)
[Docker Quicktip #7: docker ps --format ¬∑ Container42](http://www.container42.com/2016/03/27/docker-quicktip-7-psformat/)
[politeauthority/docker-pretty-ps: Tired of that awful super wide 'docker ps' output? Go vertical! Try docker-pretty-ps!](https://github.com/politeauthority/docker-pretty-ps)

Links to various formatting options can be found [here](https://docs.docker.com/engine/reference/commandline/cli/#configuration-files).

### Batch operation

Batch stop containers:

```sh
# in case admin script/orchestrator failed to stop the stack properly
docker ps -f "name=dpms19-*" -q | xargs -r docker rm -f
```

Batch remove images:

```sh
# this may not work if there is multiple tag pointing to the same image hash
docker images --filter=reference="dpms/*:3.3.*" -q | xargs -r docker rmi
# remove by label, requires `jq`
docker images -f reference="dpms/*:2.2.*" --format "{{json .}}" | jq '.Repository + ":" + .Tag' | xargs -L1 -r docker rmi
docker images -f reference="astri/worker*" | awk 'NR>1 {print $1":"$2}' | xargs -L1 -r docker rmi
```

### Find Dependent Child Images

[linux - How to get the list of dependent child images in Docker? - Stack Overflow](https://stackoverflow.com/questions/36584122/how-to-get-the-list-of-dependent-child-images-in-docker)
[Python3 script to find descendants of one or more docker images](https://gist.github.com/altaurog/21ea7afe578a523e3dfe8d8a746f1e7d)

```sh
ID=f50f9524513f
for i in $(docker images -q)
do
    docker history $i | grep -q ${ID} && echo $i
done | sort -u
```

### Moving Container between Hosts

[Docker Over SSH - ITNEXT](https://itnext.io/docker-over-ssh-51ab25a79f2e)
[docker-push-ssh ¬∑ PyPI](https://pypi.org/project/docker-push-ssh/)

```sh
# standard save, copy and load
docker save mycontainerimage | gzip > mycontainerimage.tar.gz
gunzip -c mycontainerimage.tar.gz | docker load

# ssh piping, docker load handles bzip automatically
docker save mycontainerimage | bzip2 | \
  ssh root@server 'docker load'
```

### Restart Policy

[Ensuring Containers Are Always Running with Docker's Restart Policy - via @codeship | via @codeship](https://blog.codeship.com/ensuring-containers-are-always-running-with-dockers-restart-policy/)

### dexec

[ahmetalpbalkan/go-dexec: It's like Go os/exec package but for Docker](https://github.com/ahmetalpbalkan/go-dexec/)
[Introducing dexec](https://ahmetalpbalkan.com/blog/dexec)

### Docker in Docker

[jpetazzo/dind: Docker in Docker](https://github.com/jpetazzo/dind) OBSOLETED by official [docker image](https://hub.docker.com/_/docker/) in `dind` favor

[Setting up a Docker Swarm cluster using Docker in Docker | Callista Enterprise](http://callistaenterprise.se/blogg/teknik/2017/12/18/docker-in-swarm-mode-on-docker-in-docker/)
[Setting up a Kubernetes cluster using Docker in Docker | Callista Enterprise](http://callistaenterprise.se/blogg/teknik/2017/12/20/kubernetes-on-docker-in-docker/)

```sh
docker run --privileged -d docker:dind

docker run --privileged -it --rm docker:dind --storage-driver=$(docker info -f '{{.Driver}}')
docker run --privileged -it --rm --entrypoint sh docker:dind
```

```sh
# start a docker daemon in docker
docker run --privileged --name dind -d docker:dind
# docker clients using dind
docker run --link dind docker docker run -d nginx
docker run --link dind docker docker ps
```

[One container to rule them all](http://jpetazzo.github.io/2016/04/03/one-container-to-rule-them-all/)

- create containers from a container;
- allow a container to be able to interact with your overall Docker setup;
- implementation of a replication controller in a container

[Using Docker-in-Docker for your CI or testing environment? Think twice.](http://jpetazzo.github.io/2015/09/03/do-not-use-docker-in-docker-for-ci/)
For CI, the simple solution is o:

```sh
docker run -v /var/run/docker.sock:/var/run/docker.sock docker ...
```

But the container can mess with the host docker daemon.

[Docker inside the CI runner? ¬∑ Issue #9 ¬∑ sameersbn/docker-gitlab-ci-runner](https://github.com/sameersbn/docker-gitlab-ci-runner/issues/9#issuecomment-67925817)
[justone/dockviz](https://github.com/justone/dockviz)

### batch update docker images

```sh
docker images | grep -v '<none>' | awk 'NR>1 {print $1":"$2}' | xargs -L1 -r docker pull
```

### cleanup Docker

```sh
# clean dangling images
docker rmi $(docker images -f dangling=true -q)
# clean images without tag
docker images -a --no-trunc | grep none | awk '{print $3}' | xargs -L1 -r docker rmi
# clean exited containers
docker ps -a --no-trunc | grep 'Exit' | awk '{print $1}' | xargs -L1 -r docker rm

# clean all containers
docker rm -f $(docker ps -aq)

docker system prune -f
```

[spotify/docker-gc: Docker garbage collection of containers and images](https://github.com/spotify/docker-gc)

[What are Docker <none>:<none> images? ‚Äî Project Atomic](http://www.projectatomic.io/blog/2015/07/what-are-docker-none-none-images/)
[How do I remove orphaned images? - Open Source Projects / DockerEngine - Docker Forums](https://forums.docker.com/t/how-do-i-remove-orphaned-images/1172)
[Command to remove all unused images - General Discussions / Feature Requests - Docker Forums](https://forums.docker.com/t/command-to-remove-all-unused-images/20)
[Clean up after Docker by stefanXO](http://blog.stefanxo.com/2014/02/clean-up-after-docker/)
[Docker Cleanup Scripts Comparison](https://www.brianchristner.io/docker-cleanup-script-comparison/)

### Flatten layers

`docker export` and `docker import`

This will merge the layers and make the image smaller.

### Docker Source Code

[docker/docker: Docker - the open-source application container engine](https://github.com/docker/docker)

`cli/`: the CLI
`api/client/`: the commands
`server/router`: REST API router
`api/server/server.go`: the REST API server
`dockerfile/builder.go`: Dockerfile parser

[Docker Ê∫êÁ†ÅÂàÜÊûêÔºà‰∏ÄÔºâÔºöDocker Êû∂ÊûÑ](http://www.infoq.com/cn/articles/docker-source-code-analysis-part1)
[Docker Ê∫êÁ†ÅÂàÜÊûê(‰∫å)ÔºöDocker Client ÂàõÂª∫‰∏éÂëΩ‰ª§ÊâßË°å](http://www.infoq.com/cn/articles/docker-source-code-analysis-part2)
[Docker Ê∫êÁ†ÅÂàÜÊûêÔºà‰∏âÔºâÔºöDocker Daemon ÂêØÂä®](http://www.infoq.com/cn/articles/docker-source-code-analysis-part3)
[Docker Ê∫êÁ†ÅÂàÜÊûêÔºàÂõõÔºâÔºöDocker Daemon ‰πã NewDaemon ÂÆûÁé∞](http://www.infoq.com/cn/articles/docker-source-code-analysis-part4)
[Docker Ê∫êÁ†ÅÂàÜÊûêÔºà‰∫îÔºâÔºöDocker Server ÁöÑÂàõÂª∫](http://www.infoq.com/cn/articles/docker-source-code-analysis-part5)
[Docker Ê∫êÁ†ÅÂàÜÊûêÔºàÂÖ≠ÔºâÔºöDocker Daemon ÁΩëÁªú](http://www.infoq.com/cn/articles/docker-source-code-analysis-part6)
[Docker Ê∫êÁ†ÅÂàÜÊûêÔºà‰∏ÉÔºâÔºöDocker Container ÁΩëÁªú Ôºà‰∏äÔºâ](http://www.infoq.com/cn/articles/docker-source-code-analysis-part7)
[Docker Ê∫êÁ†ÅÂàÜÊûêÔºàÂÖ´ÔºâÔºöDocker Container ÁΩëÁªúÔºà‰∏ãÔºâ](http://www.infoq.com/cn/articles/docker-source-code-analysis-part8)
[Docker Ê∫êÁ†ÅÂàÜÊûêÔºà‰πùÔºâÔºöDocker ÈïúÂÉè](http://www.infoq.com/cn/articles/docker-source-code-analysis-part9)
[Docker Ê∫êÁ†ÅÂàÜÊûêÔºàÂçÅÔºâÔºöDocker ÈïúÂÉè‰∏ãËΩΩ](http://www.infoq.com/cn/articles/docker-source-code-analysis-part10)
[Docker Ê∫êÁ†ÅÂàÜÊûêÔºàÂçÅ‰∏ÄÔºâÔºöÈïúÂÉèÂ≠òÂÇ®](http://www.infoq.com/cn/articles/docker-source-code-analysis-part11)

### Container as System Service

[Automatically start containers](https://docs.docker.com/engine/admin/host_integration/)  
[Systemd vs. Docker [LWN.net]](https://lwn.net/Articles/676831/)  
[OpenShift Origin - geard](http://openshift.github.io/geard/) `systemd` integration

systemd service file:

```
[Unit]
Description=Run pg
After=docker.service
Requires=docker.service

[Service]
Restart=always
RestartSec=30s
ExecStartPre=-/usr/bin/docker kill pg
ExecStartPre=-/usr/bin/docker rm pg
ExecStart=/usr/bin/docker run --rm --name pg --volumes-from pgdata postgres
ExecStop=/usr/bin/docker kill pg
ExecStartPost=-/usr/bin/docker rm pg

[Install]
WantedBy=multi-user.target
```

### running GUI app in container

1. install `xvfb`
2. in host, `xvfb :88 -screen 0 1366x768x24 -ac`
3. in container, `DISPLAY:88 firefox`

[Â¶Ç‰ΩïÂú® Vagrant/Docker ‰∏≠ËøêË°å Firefox | YL Notes](http://yunlzheng.github.io/2014/10/19/intro-xvfn-ubuntu/)

[Docker Desktop: Your Desktop over ssh running inside of a Docker container | Docker Blog](https://blog.docker.com/2013/07/docker-desktop-your-desktop-over-ssh-running-inside-of-a-docker-container/)
[Jessie Frazelle's Blog: Docker Containers on the Desktop](https://blog.jessfraz.com/post/docker-containers-on-the-desktop/)
[More Docker Doodlings ‚Äì Accessing GUI Apps Via a Browser from a Container Using Guacamole | OUseful.Info, the blog...](https://blog.ouseful.info/2016/05/04/more-docker-doodlings-accessing-gui-apps-via-a-browser-from-a-container-using-guacamole/)

[BWC: GUI apps in Docker on OSX](http://blog.bennycornelissen.nl/bwc-gui-apps-in-docker-on-osx/?)

[Howto get hardware accelerated OpenGL support in Docker - Gernot on developing Software](http://gernotklingler.com/blog/howto-get-hardware-accelerated-opengl-support-docker/)

[Meet Webtops A Linux Desktop Environment In Your Browser | LinuxServer.io](https://www.linuxserver.io/blog/2021-05-05-meet-webtops-a-linux-desktop-environment-in-your-browser)
[linuxserver/webtop - LinuxServer.io](https://docs.linuxserver.io/images/docker-webtop)
[linuxserver/webtop - Docker Image | Docker Hub](https://hub.docker.com/r/linuxserver/webtop)
